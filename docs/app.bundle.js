(()=>{const e=document.getElementById("save"),t=document.getElementById("text"),n=document.getElementById("file"),o=document.getElementById("mode-btn"),i=document.getElementById("return-btn"),l=document.getElementById("erase-btn"),d=document.getElementById("line-width"),c=document.getElementById("color"),a=Array.from(document.getElementsByClassName("color-option")),r=document.querySelector("#canvas1"),s=r.getContext("2d"),u=800,f=800;r.width=u,r.height=f,s.lineWidth=d.value,s.lineCap="round";let m=!1,v=!1,E="white";function g(){m=!1,s.beginPath()}function y(e){const t=e.target.dataset.color;s.strokeStyle=t,s.fillStyle=t,c.value=t}r.addEventListener("dblclick",(function(e){const n=t.value;""!==n&&(s.save(),s.lineWidth=1,s.font="68px serif",s.fillText(n,e.offsetX,e.offsetY),s.restore())})),r.addEventListener("mousemove",(function(e){if(m)return s.lineTo(e.offsetX,e.offsetY),void s.stroke();s.moveTo(e.offsetX,e.offsetY)})),r.addEventListener("mousedown",(function(){m=!0})),r.addEventListener("mouseup",g),r.addEventListener("mouseleave",g),r.addEventListener("click",(function(){v&&(s.fillRect(0,0,u,f),E=s.fillStyle)})),d.addEventListener("change",(function(e){s.lineWidth=e.target.value})),c.addEventListener("change",(function(e){s.strokeStyle=e.target.value,s.fillStyle=e.target.value})),a.forEach((e=>e.addEventListener("click",y))),o.addEventListener("click",(function(){v?(v=!1,o.innerText="Fill"):(v=!0,o.innerText="Draw")})),i.addEventListener("click",(function(){s.fillStyle="white",s.clearRect(0,0,u,f)})),l.addEventListener("click",(function(){s.strokeStyle=E,v=!1,o.innerText="Fill"})),n.addEventListener("change",(function(e){const t=e.target.files[0],o=URL.createObjectURL(t),i=new Image;i.src=o,i.onload=function(){s.drawImage(i,0,0,u,f),n.value=null}})),e.addEventListener("click",(function(){const e=r.toDataURL(),t=document.createElement("a");t.href=e,t.download="myDrawing.png",t.click()}))})();